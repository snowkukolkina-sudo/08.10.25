# üßæ –†–ï–ê–õ–¨–ù–ê–Ø –§–ò–°–ö–ê–õ–ò–ó–ê–¶–ò–Ø - –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û

## ‚úÖ –ß–¢–û –°–û–ó–î–ê–ù–û

–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `fiscal-module-real.js` —Å **—Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π** —Å –û–§–î –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –∏ –ö–ö–¢!

---

## üéØ –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–ú–´–ï –ü–†–û–í–ê–ô–î–ï–†–´

### 1. **–¢–∞–∫—Å–∫–æ–º (TAXCOM)**
- API: `https://api.taxcom.ru/v2`
- –°–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –û–§–î
- –ù–∞–¥—ë–∂–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π

### 2. **–ü–µ—Ä–≤—ã–π –û–§–î**
- API: `https://api.1-ofd.ru/v1`
- –í—Ç–æ—Ä–æ–π –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏
- –•–æ—Ä–æ—à–∞—è —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 3. **–ö–æ–Ω—Ç—É—Ä.–û–§–î**
- API: `https://kkt.kontur.ru/api/v1`
- –û—Ç –°–ö–ë –ö–æ–Ω—Ç—É—Ä
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ –ö–æ–Ω—Ç—É—Ä

---

## üîß –ù–ê–°–¢–†–û–ô–ö–ê

### **–®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ö–ö–¢**

–¢–µ–±–µ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å:
1. **–°–µ—Ä–∏–π–Ω—ã–π –Ω–æ–º–µ—Ä –ö–ö–¢** (–Ω–∞ –∫–æ—Ä–ø—É—Å–µ –∫–∞—Å—Å—ã)
2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä** (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
3. **–ù–æ–º–µ—Ä —Ñ–∏—Å–∫–∞–ª—å–Ω–æ–≥–æ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—è**
4. **–ò–ù–ù –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏**

### **–®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –û–§–î**

–í—ã–±–µ—Ä–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏:

**–î–ª—è –¢–∞–∫—Å–∫–æ–º:**
- –õ–æ–≥–∏–Ω
- –ü–∞—Ä–æ–ª—å
- –ö–æ–¥ –≥—Ä—É–ø–ø—ã (groupCode)

**–î–ª—è –ü–µ—Ä–≤–æ–≥–æ –û–§–î:**
- API —Ç–æ–∫–µ–Ω
- ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (deviceId)

**–î–ª—è –ö–æ–Ω—Ç—É—Ä.–û–§–î:**
- –õ–æ–≥–∏–Ω
- –ü–∞—Ä–æ–ª—å
- ID –∫–∞—Å—Å—ã (kktId)

### **–®–∞–≥ 3: –£–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥—É–ª–µ**

–í `fiscal-module-real.js` –Ω–∞–π–¥–∏ –∏ –∑–∞–º–µ–Ω–∏:

```javascript
apiKeys: {
    taxcom: {
        login: '–í–ê–®_–õ–û–ì–ò–ù',              // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
        password: '–í–ê–®_–ü–ê–†–û–õ–¨',          // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
        groupCode: '–í–ê–®_–ö–û–î_–ì–†–£–ü–ü–´',     // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
        apiUrl: 'https://api.taxcom.ru/v2'
    },
    // ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö
}

kkt: {
    serialNumber: '–í–ê–®_–°–ï–†–ò–ô–ù–´–ô_–ù–û–ú–ï–†',  // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
    regNumber: '–í–ê–®_–†–ù_–ö–ö–¢',             // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
    fiscalDriveNumber: '–ù–û–ú–ï–†_–§–ù',       // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
    inn: '–í–ê–®_–ò–ù–ù',                      // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨
    taxSystem: 1, // 1-–û–°–ù, 2-–£–°–ù –¥–æ—Ö–æ–¥, 3-–£–°–ù –¥–æ—Ö–æ–¥-—Ä–∞—Å—Ö–æ–¥
}
```

---

## üìã –§–£–ù–ö–¶–ò–û–ù–ê–õ

### **1. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã**
```javascript
const fiscalModule = new RealFiscalModule();

await fiscalModule.openShift({
    name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
    inn: '123456789012'
});
```

### **2. –ü–µ—á–∞—Ç—å —á–µ–∫–∞**
```javascript
await fiscalModule.printReceipt(order, 'cash'); // –∏–ª–∏ 'card'
```

–ß–µ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –û–§–î
- ‚úÖ –ü–µ—á–∞—Ç–∞–µ—Ç—Å—è –Ω–∞ –∫–∞—Å—Å–µ
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ email/SMS –∫–ª–∏–µ–Ω—Ç—É
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç QR-–∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### **3. –í–æ–∑–≤—Ä–∞—Ç**
```javascript
await fiscalModule.printRefund(order, amount);
```

### **4. X-–æ—Ç—á—ë—Ç (–±–µ–∑ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–º–µ–Ω—ã)**
```javascript
await fiscalModule.printXReport();
```

### **5. Z-–æ—Ç—á—ë—Ç (–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–º–µ–Ω—ã)**
```javascript
await fiscalModule.closeShift();
```

---

## üßæ –§–û–†–ú–ê–¢ –ß–ï–ö–ê

–ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —á–µ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –§–§–î 1.05/1.2:

```
–ü—Ä–∏–º–µ—Ä —á–µ–∫–∞:
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
–î–≠–ù–î–ò –ü–ò–¶–¶–ê –ò –°–£–®–ò
–ò–ù–ù: 1234567890
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ü–∏—Ü—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ 25—Å–º
  1 —à—Ç x 399.00 = 399.00
–ù–î–° 20%: 66.50

–†–æ–ª–ª –§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è
  2 —à—Ç x 450.00 = 900.00
–ù–î–° 20%: 150.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:           1299.00
  –≤ —Ç.—á. –ù–î–° 20%: 216.50

–ù–∞–ª–∏—á–Ω—ã–º–∏:       1299.00
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–°–º–µ–Ω–∞: 42
–ß–µ–∫: 156
–§–î: 123456789
–§–ü: 1234567890
–î–∞—Ç–∞: 29.09.2025 18:30
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
[QR-–ö–û–î –î–õ–Ø –ü–†–û–í–ï–†–ö–ò]
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É!
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

---

## üîå –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° POS

–í `pos.html` –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–¥—É–ª—å:

```html
<script src="modules/fiscal-module-real.js"></script>

<script>
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
const fiscalModule = new RealFiscalModule();

// –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã
async function openShift() {
    const result = await fiscalModule.openShift(currentUser);
    if (result.success) {
        alert('‚úÖ –°–º–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∞!');
    }
}

// –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞–∫–∞–∑–∞
async function completeOrder(order) {
    // 1. –ü—Ä–æ–±–∏—Ç—å —á–µ–∫
    const receipt = await fiscalModule.printReceipt(order, paymentType);
    
    if (receipt.success) {
        // 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–º–µ—Ä —á–µ–∫–∞ –≤ –∑–∞–∫–∞–∑–µ
        order.fiscalDocument = receipt.receipt.fiscalDocument;
        order.receiptNumber = receipt.receipt.receiptNumber;
        
        // 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫ –∫–ª–∏–µ–Ω—Ç—É (email/SMS)
        sendReceiptToCustomer(order, receipt.receipt.qrCode);
        
        alert('‚úÖ –ß–µ–∫ –ø—Ä–æ–±–∏—Ç!');
    }
}

// –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å–º–µ–Ω—ã
async function closeShift() {
    const result = await fiscalModule.closeShift();
    if (result.success) {
        printShiftReport(result.report);
    }
}
</script>
```

---

## üìä –û–¢–ß–Å–¢–´

### **–û—Ç—á—ë—Ç –ø–æ —Å–º–µ–Ω–µ:**
```javascript
{
    number: 42,
    openedAt: '2025-09-29T10:00:00',
    closedAt: '2025-09-29T22:00:00',
    cashier: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
    receipts: 156,
    totalCash: 45320,
    totalCard: 28450,
    fiscalDocument: '123456789'
}
```

### **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤:**
–í—Å–µ —á–µ–∫–∏ –∏ –æ—Ç—á—ë—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:
- –í localStorage (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- –í –ë–î —á–µ—Ä–µ–∑ backend API
- –í –û–§–î (–Ω–∞–≤—Å–µ–≥–¥–∞)

---

## üö® –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö

### **–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:**

1. **"–°–º–µ–Ω–∞ –Ω–µ –æ—Ç–∫—Ä—ã—Ç–∞"**
   - –†–µ—à–µ–Ω–∏–µ: –û—Ç–∫—Ä—ã—Ç—å —Å–º–µ–Ω—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–±–∏—Ç–∏–µ–º —á–µ–∫–∞

2. **"–ù–µ—Ç —Å–≤—è–∑–∏ —Å –û–§–î"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, API –∫–ª—é—á–∏

3. **"–§–∏—Å–∫–∞–ª—å–Ω—ã–π –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω–µ–Ω"**
   - –†–µ—à–µ–Ω–∏–µ: –í—ã–∑–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã –§–ù

4. **"–ù–µ–≤–µ—Ä–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã"**
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ù–ù, –†–ù –ö–ö–¢

---

## üîê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### **API –∫–ª—é—á–∏:**
- ‚ö†Ô∏è **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ Git!**
- ‚úÖ –•—Ä–∞–Ω–∏—Ç—å –≤ `.env` —Ñ–∞–π–ª–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ:**
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –ø–æ HTTPS
- –î–∞–Ω–Ω—ã–µ —á–µ–∫–æ–≤ —à–∏—Ñ—Ä—É—é—Ç—Å—è

---

## üì± –û–¢–ü–†–ê–í–ö–ê –ß–ï–ö–û–í –ö–õ–ò–ï–ù–¢–ê–ú

### **Email:**
```javascript
receipt.CustomerReceipt = {
    Email: 'client@example.com'
};
```

### **SMS:**
```javascript
receipt.CustomerReceipt = {
    Phone: '+79991234567'
};
```

–û–§–î –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç —á–µ–∫!

---

## ‚úÖ –ì–û–¢–û–í–û –ö –†–ê–ë–û–¢–ï

–ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤! –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:

1. ‚úÖ –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –û–§–î
2. ‚úÖ –£–∫–∞–∑–∞—Ç—å API –∫–ª—é—á–∏
3. ‚úÖ –£–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ö–ö–¢
4. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ POS

**–ò –ú–û–ñ–ù–û –ü–†–û–ë–ò–í–ê–¢–¨ –†–ï–ê–õ–¨–ù–´–ï –ß–ï–ö–ò!** üßæ‚úÖ

---

## üìû –¢–ï–•–ü–û–î–î–ï–†–ñ–ö–ê –ü–†–û–í–ê–ô–î–ï–†–û–í

### **–¢–∞–∫—Å–∫–æ–º:**
- –°–∞–π—Ç: taxcom.ru
- –¢–µ–ª: 8-800-550-15-57
- Email: support@taxcom.ru

### **–ü–µ—Ä–≤—ã–π –û–§–î:**
- –°–∞–π—Ç: 1-ofd.ru
- –¢–µ–ª: 8-800-100-10-90
- Email: support@1-ofd.ru

### **–ö–æ–Ω—Ç—É—Ä.–û–§–î:**
- –°–∞–π—Ç: ofd.kontur.ru
- –¢–µ–ª: 8-800-500-50-50
- Email: support@kontur.ru

---

**–§–ò–°–ö–ê–õ–ò–ó–ê–¶–ò–Ø –ì–û–¢–û–í–ê!** üéâ
