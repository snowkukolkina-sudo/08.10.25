@echo off
chcp 65001 >nul

color 0A
cls

echo.
echo ╔══════════════════════════════════════════════════════════╗
echo ║                                                          ║
echo ║              🍕 DANDY POS Server 🍕                     ║
echo ║                                                          ║
echo ║        Полнофункциональная система управления           ║
echo ║                   рестораном                             ║
echo ║                                                          ║
echo ╚══════════════════════════════════════════════════════════╝
echo.
echo.

cd /d "%~dp0backend"

echo ✅ Node.js: 
node --version
echo.
echo ✅ Директория: %CD%
echo.

if not exist "node_modules\" (
    echo 📦 Установка зависимостей...
    call npm install
)

echo.
echo ╔══════════════════════════════════════════════════════════╗
echo ║              🚀 ЗАПУСК СЕРВЕРА...                       ║
echo ╚══════════════════════════════════════════════════════════╝
echo.
echo 💡 Для остановки сервера нажмите Ctrl+C
echo 🌐 После запуска откройте: http://localhost:3000/
echo.
echo ═══════════════════════════════════════════════════════════
echo.

REM Запускаем сервер и НЕ закрываем окно
node src\index-simple-full.js

REM Это сработает только если сервер остановится
echo.
echo.
color 0E
echo ═══════════════════════════════════════════════════════════
echo  Сервер остановлен. Код выхода: %ERRORLEVEL%
echo ═══════════════════════════════════════════════════════════
echo.
pause
